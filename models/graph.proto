syntax = "proto3";

package travelingman;

option go_package = "github.com/va6996/travelingman/pb";

import "google/protobuf/timestamp.proto";
import "itinerary.proto";

// Node represents a location/place in the itinerary graph
// It maps to protobuf structures: TripDay, Place, Accommodation
message Node {
    string id = 1;                                    // Unique identifier for the node
    string location = 2;                              // Name or address of the location
    google.protobuf.Timestamp from_timestamp = 3;     // Arrival time at this node
    google.protobuf.Timestamp to_timestamp = 4;       // Departure time from this node
    bool is_inter_city = 5;                           // Whether this node represents an inter-city travel point
    Accommodation stay = 6;                           // Hotel/accommodation info (from Accommodation)
}

// Edge represents transportation between two locations
// It maps to protobuf structures: Transport
message Edge {
    string from_id = 1;                               // ID of the source node
    string to_id = 2;                                 // ID of the destination node
    int64 duration_seconds = 3;                       // Duration of travel in seconds
    Transport transport = 4;                          // Full Transport struct from Transport
}

// Graph represents the complete graph structure of a user's itinerary
message Graph {
    repeated Node nodes = 1;                           // List of nodes in the graph
    repeated Edge edges = 2;                           // List of edges in the graph
    Graph sub_graph = 3;                              // For intra-city details (contains Places)
}

